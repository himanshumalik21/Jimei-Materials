// Global-translations.js - Shared translations for all pages
// Jimei Materials Development Team
// Version: 2.0.0

(function() {
    'use strict';

    // Shared translations across all pages
    const commonTranslations = {
en: {
    // Navigation (shared)
    "nav_home": "Home",
    "nav_products": "Products",
    "nav_dpc": "Direct Plated Copper (DPC)",
    "nav_dbc": "Direct Bonded Copper (DBC)",
    "nav_htcc": "HTCC Ceramic Packaging",
    "nav_all_products": "All Products",
    "nav_resources": "Resources",
    "nav_about": "About",
    "nav_contact": "Contact",
    "nav_request_quote": "Request Quote",
            
    // Footer
    "footer_description": "Leading manufacturer of ceramic metallization substrates for thermal management applications since 2016. ISO 14001:2015 certified with global manufacturing capabilities.",
    "footer_products": "Products",
    "footer_company": "Company",
    "footer_contact": "Contact Info",
    "footer_address": "First Industrial Zone, Haosan Linpokeng, Xinqiao Street, Bao'an District, Shenzhen, China",
    "footer_hours": "Mon-Fri: 8:00 AM - 6:00 PM (GMT+8)",
    "footer_languages": "Support: English, Chinese, Japanese, Korean, German",
    "footer_rights": "All rights reserved.",
    "footer_privacy": "Privacy Policy",
    "footer_terms": "Terms of Service",
    "footer_sitemap": "Sitemap",

    // Accessibility
    "skip_to_main": "Skip to main content"
},

zh: {
    // Navigation (Chinese)
    "nav_home": "首页",
    "nav_products": "产品",
    "nav_dpc": "直接镀铜基板 (DPC)",
    "nav_dbc": "直接覆铜基板 (DBC)",
    "nav_htcc": "HTCC 陶瓷封装",
    "nav_all_products": "所有产品",
    "nav_resources": "资源",
    "nav_about": "关于我们",
    "nav_contact": "联系我们",
    "nav_request_quote": "获取报价",

    // 页脚
    "footer_description": "自 2016 年起，成为热管理应用陶瓷金属化基板的领先制造商。通过 ISO 14001:2015 认证，具备全球化制造能力。",
    "footer_products": "产品",
    "footer_company": "公司",
    "footer_contact": "联系信息",
    "footer_address": "中国广东省深圳市宝安区新桥街道浩森林坡坑第一工业区",
    "footer_hours": "周一至周五：上午 8:00 - 下午 6:00 (北京时间 GMT+8)",
    "footer_languages": "支持语言：英语、中文、日语、韩语、德语",
    "footer_rights": "版权所有。",
    "footer_privacy": "隐私政策",
    "footer_terms": "服务条款",
    "footer_sitemap": "网站地图",

    // 无障碍访问
    "skip_to_main": "跳转到主内容"
},

ja: {
    // Navigation (既存訳を適用)
    "nav_home": "ホーム",
    "nav_products": "製品一覧",
    "nav_dpc": "DPC (直接めっき銅)",
    "nav_dbc": "DBC (直接接合銅)",
    "nav_htcc": "HTCCセラミックパッケージ",
    "nav_all_products": "全製品一覧",
    "nav_resources": "技術資料",
    "nav_about": "会社情報",
    "nav_contact": "お問い合わせ",
    "nav_request_quote": "見積依頼",

    // Footer (既存訳を適用)
    "footer_description": "2016年設立以来、熱管理アプリケーション向けセラミックメタライゼーション基板の主要メーカー。ISO 14001:2015認証を取得し、グローバルな製造能力を有しています。",
    "footer_products": "製品",
    "footer_company": "会社情報",
    "footer_contact": "連絡先",
    "footer_address": "中国 広東省 深圳市 宝安区 新橋街道 浩森林坡坑第一工業区",
    "footer_hours": "月～金: 8:00 AM - 6:00 PM (GMT+8)",
    "footer_languages": "対応言語: 英語、中国語、日本語、韓国語、ドイツ語",
    "footer_rights": "All rights reserved.",
    "footer_privacy": "プライバシーポリシー",
    "footer_terms": "利用規約",
    "footer_sitemap": "サイトマップ",

    // Accessibility
    "skip_to_main": "メインコンテンツへスキップ"
},

ko: {            
    // 내비게이션
    "nav_home": "홈",
    "nav_products": "제품",
    "nav_dpc": "직접 도금 구리 (DPC)",
    "nav_dbc": "직접 접합 구리 (DBC)",
    "nav_htcc": "HTCC 세라믹 패키징",
    "nav_all_products": "전체 제품",
    "nav_resources": "기술 자료",
    "nav_about": "회사소개",
    "nav_contact": "문의하기",
    "nav_request_quote": "견적 요청",

    // 접근성
    "skip_to_main": "본문으로 건너뛰기"
},

de: {
    // Navigation
    "nav_home": "Startseite",
    "nav_products": "Produkte",
    "nav_dpc": "Direct Plated Copper (DPC)",
    "nav_dbc": "Direct Bonded Copper (DBC)",
    "nav_htcc": "HTCC Keramikgehäuse",
    "nav_all_products": "Alle Produkte",
    "nav_resources": "Ressourcen",
    "nav_about": "Über uns",
    "nav_contact": "Kontakt",
    "nav_request_quote": "Angebot anfordern",

    // Footer
    "footer_description": "Führender Hersteller metallisierter Keramiksubstrate für Wärmemanagement-Anwendungen seit 2016. ISO 14001:2015 zertifiziert mit globalen Fertigungskapazitäten.",
    "footer_products": "Produkte",
    "footer_company": "Unternehmen",
    "footer_contact": "Kontaktinformationen",
    "footer_address": "First Industrial Zone, Haosan Linpokeng, Xinqiao Street, Bao'an District, Shenzhen, China",
    "footer_hours": "Mo-Fr: 8:00 - 18:00 Uhr (GMT+8)",
    "footer_languages": "Support: Englisch, Chinesisch, Japanisch, Koreanisch, Deutsch",
    "footer_rights": "Alle Rechte vorbehalten.",
    "footer_privacy": "Datenschutzrichtlinie",
    "footer_terms": "Nutzungsbedingungen",
    "footer_sitemap": "Sitemap",
    
    // Accessibility
    "skip_to_main": "Zum Hauptinhalt springen"            
}
};

// Language management system (shared)
    function initLanguageSystem(pageTranslations = {}) {
        // Merge common translations with page-specific translations
        const allTranslations = {};
        for (const lang in commonTranslations) {
            allTranslations[lang] = {
                ...commonTranslations[lang],
                ...(pageTranslations[lang] || {})
            };
        }

        let currentLang = 'en';

        // Function to change language
        function changeLanguage(lang) {
            if (!allTranslations[lang]) return;
            
            currentLang = lang;
            document.documentElement.lang = lang;
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (allTranslations[lang] && allTranslations[lang][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.value = allTranslations[lang][key];
                    } else if (element.hasAttribute('placeholder')) {
                        element.setAttribute('placeholder', allTranslations[lang][key]);
                    } else if (element.hasAttribute('title')) {
                        element.setAttribute('title', allTranslations[lang][key]);
                    } else if (element.hasAttribute('alt')) {
                        element.setAttribute('alt', allTranslations[lang][key]);
                    } else if (element.hasAttribute('content')) {
                        element.setAttribute('content', allTranslations[lang][key]);
                    } else {
                        element.textContent = allTranslations[lang][key];
                    }
                }
            });
            
            // Update language dropdown
            document.querySelectorAll('.language-option').forEach(option => {
                option.classList.remove('active');
                if (option.getAttribute('data-lang') === lang) {
                    option.classList.add('active');
                }
            });
            
            // Update current language display
            const langNames = { en: 'English', zh: '中文', ja: '日本語', ko: '한국어', de: 'Deutsch' };
            const currentLangElement = document.getElementById('currentLanguage');
            if (currentLangElement && langNames[lang]) {
                currentLangElement.textContent = langNames[lang];
            }
            
            // Save preference to localStorage
            localStorage.setItem('preferredLanguage', lang);
            
            // Close dropdown if it exists
            const languageDropdown = document.getElementById('languageDropdown');
            if (languageDropdown) {
                languageDropdown.classList.remove('show');
            }
        }

        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check for saved language preference
            const savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang && allTranslations[savedLang]) {
                changeLanguage(savedLang);
            } else {
                // Default to browser language or English
                const browserLang = navigator.language.split('-')[0];
                if (allTranslations[browserLang]) {
                    changeLanguage(browserLang);
                } else {
                    changeLanguage('en');
                }
            }
            
            // Language dropdown toggle
            const languageBtn = document.getElementById('languageBtn');
            if (languageBtn) {
                languageBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const dropdown = document.getElementById('languageDropdown');
                    if (dropdown) {
                        dropdown.classList.toggle('show');
                    }
                });
            }
            
            // Language selection
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    changeLanguage(lang);
                });
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                const dropdown = document.getElementById('languageDropdown');
                if (dropdown) {
                    dropdown.classList.remove('show');
                }
            });
            
            // Stop propagation for dropdown clicks
            const languageDropdown = document.getElementById('languageDropdown');
            if (languageDropdown) {
                languageDropdown.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
        });

        return {
            changeLanguage,
            translations: allTranslations
        };
    }

    // Export for use in page-specific files
    window.CommonTranslations = {
        commonTranslations,
        initLanguageSystem
    };
})();